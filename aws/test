var signer_v4 = require("aws/signature/signer_v4");
var http = require("http");

var accessKey = "AKIAIIDSHPBZ5JRR6CGA";
var accessSecret = "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";


var opts = {service: 'sqs', region: 'us-east-1', path: '/?Action=ListQueues'};

//return signer_v4.canonicalString(opts, {accessKeyId: accessKey, secretAccessKey: accessSecret});

//return signer_v4.stringToSign(opts, {accessKeyId: accessKey, secretAccessKey: accessSecret});

//return signer_v4.signedHeaders(opts, {accessKeyId: accessKey, secretAccessKey: accessSecret});

//return signer_v4.signature(opts, {accessKeyId: accessKey, secretAccessKey: accessSecret});
signer_v4.sign(opts, {accessKeyId: accessKey, secretAccessKey: accessSecret});

return opts;

var requestDetails = {
  "url": "https://" + opts.hostname + opts.path,
  "headers": opts.headers,
  "method": "GET",
  "params": {}
}

var response = http.request(requestDetails);

return response;

//return escape("my test?name=batata&family=yababa");
//return unescape("my%20test%3Fname%3Dbatata%26family%3Dyababa");

//var crypto = require("aws/signature/cryptoJS");

//return crypto.sha256("ABCDEFGHIJKLMNOPQRSTUVWXYZ");

//return crypto.CryptoJS.HmacSHA256("ABCDEFGHIJKLMNOPQRSTUVWXYZ", "1234567890").toString();

//return encodeURIComponent(crypto.CryptoJS.HmacSHA256("GET\nelasticmapreduce.amazonaws.com\n/\nAWSAccessKeyId=AKIAIOSFODNN7EXAMPLE&Action=DescribeJobFlows&SignatureMethod=HmacSHA256&SignatureVersion=2&Timestamp=2011-10-03T15%3A19%3A30&Version=2009-03-31", "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY").toString(crypto.CryptoJS.enc.Base64));

//return encodeURIComponent(crypto.CryptoJS.HmacSHA256("GET\nelasticmapreduce.amazonaws.com\n/\nAWSAccessKeyId=AKIAIOSFODNN7EXAMPLE&Action=DescribeJobFlows&SignatureMethod=HmacSHA256&SignatureVersion=2&Timestamp=2011-10-03T15%3A19%3A30&Version=2009-03-31", "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY").toString(crypto.CryptoJS.enc.Base64));

/*
var signer = require("aws/signer");

var awsRequestParams = {
  "Action": "DescribeJobFlows",
  "Version": "2009-03-31"
};

var awsRequestInfo = {
  "verb": "GET",
  "host": "elasticmapreduce.amazonaws.com",
  "uriPath": "/"
}

var AWSSigner = new signer.AWSV2Signer(accessKey, accessSecret);

var timestamp = new Date();

return AWSSigner.sign(awsRequestParams, timestamp, awsRequestInfo);
*/
//////////////////////////////////////////////////////////////////////////

var signer = require("aws/signer");
var http = require("http");


var AWSSigner = new signer.AWSV2Signer(accessKey, accessSecret);

var awsRequestParams = {
  "Action": "DescribeInstances"
};

var awsRequestInfo = {
  "verb": "GET",
  "host": "ec2.us-east-1.amazonaws.com",
  "uriPath": "/"
}

var timestamp = new Date();

var awsRequestParamsWithSignature = AWSSigner.sign(awsRequestParams, timestamp, awsRequestInfo);

var requestDetails = {
  "url": "https://ec2.us-east-1.amazonaws.com",
  "headers": {
    "Accept": "application/json"
  },
  "method": "GET",
  "params": awsRequestParamsWithSignature
}

//return requestDetails.params;

var response = http.request(requestDetails);

return response;


